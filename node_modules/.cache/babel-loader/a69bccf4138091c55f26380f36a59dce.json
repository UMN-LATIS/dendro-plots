{"remainingRequest":"C:\\Users\\JThorneUMN\\Documents\\GitHub\\dendro-plots\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\JThorneUMN\\Documents\\GitHub\\dendro-plots\\src\\modules\\spline.js","dependencies":[{"path":"C:\\Users\\JThorneUMN\\Documents\\GitHub\\dendro-plots\\src\\modules\\spline.js","mtime":1631126134227},{"path":"C:\\Users\\JThorneUMN\\Documents\\GitHub\\dendro-plots\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\JThorneUMN\\Documents\\GitHub\\dendro-plots\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIkM6L1VzZXJzL0pUaG9ybmVVTU4vRG9jdW1lbnRzL0dpdEh1Yi9kZW5kcm8tcGxvdHMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0IHNpbXBsZVNtb290aGluZ1NwbGluZSBmcm9tICdzaW1wbGUtc21vb3RoaW5nLXNwbGluZSc7CmltcG9ydCBzdG9yZSBmcm9tICcuL3N0b3JlLmpzJzsKCnZhciBjcmVhdGVTcGxpbmUgPSBmdW5jdGlvbiBjcmVhdGVTcGxpbmUoeCwgeSwgZnJlcSwgaWQsIHByb3BBLCBwcm9wQikgewogIGNvbnNvbGUubG9nKCdjcmVhdGVkIHNwbGluZScpOwogIHZhciBkYXRhID0geC5tYXAoZnVuY3Rpb24gKGUsIGkpIHsKICAgIHZhciBwYWlyID0gewogICAgICB4OiBlLAogICAgICB5OiB5W2ldCiAgICB9OwogICAgcmV0dXJuIHBhaXI7CiAgfSk7CiAgdmFyIGxhbWJkYSA9IDAuMDAwMDEgKiBNYXRoLnBvdygyLCA5Ljk3ODQgKiBNYXRoLmxvZyhmcmVxKSArIDMuOTc1KTsKICB2YXIgc3BsaW5lID0gc2ltcGxlU21vb3RoaW5nU3BsaW5lKGRhdGEsIHsKICAgICdsYW1iZGEnOiBsYW1iZGEKICB9KTsKICB2YXIgeEFyciA9IFtdOwogIHZhciB5QXJyID0gW107CgogIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihzcGxpbmUucG9pbnRzKSwKICAgICAgX3N0ZXA7CgogIHRyeSB7CiAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICB2YXIgb2JqID0gX3N0ZXAudmFsdWU7CiAgICAgIHhBcnIucHVzaChvYmoueCk7CiAgICAgIHlBcnIucHVzaChvYmoueSk7CiAgICB9IC8vIHNhdmUgc3BsaW5lIHRvIHNwbGluZSBjYWNoZSBpbiBzdG9yZS5qcwoKICB9IGNhdGNoIChlcnIpIHsKICAgIF9pdGVyYXRvci5lKGVycik7CiAgfSBmaW5hbGx5IHsKICAgIF9pdGVyYXRvci5mKCk7CiAgfQoKICB2YXIgc3BsaW5lT2JqOwogIHZhciBzcGxpbmVFeGlzdHMgPSBzdG9yZS5jYWNoZS5zcGxpbmVzW3Byb3BBXS5maW5kKGZ1bmN0aW9uIChvKSB7CiAgICByZXR1cm4gby5pZCA9PSBpZDsKICB9KTsKCiAgaWYgKHNwbGluZUV4aXN0cykgewogICAgc3BsaW5lT2JqID0gc3BsaW5lRXhpc3RzOwogIH0gZWxzZSB7CiAgICBzcGxpbmVPYmogPSBuZXcgT2JqZWN0KCk7CiAgICBzcGxpbmVPYmouaWQgPSBpZDsgLy8gaWYgY2FsY3VsYXRpbmcgc3BsaW5lIGZvciBpbmRleCwgc2F2ZSBzcGxpbmUgaW4gaW4gcmF3IGF0dHJpYnV0ZSBub3QgaW5kZXggYXR0cmlidXRlCgogICAgdmFyIHByb3AgPSBwcm9wQiA/IHByb3BCIDogcHJvcEE7CiAgICBzdG9yZS5jYWNoZS5zcGxpbmVzW3Byb3BdLnB1c2goc3BsaW5lT2JqKTsKICB9CgogIHNwbGluZU9ialtmcmVxXSA9IHsKICAgIHg6IHhBcnIsCiAgICB5OiB5QXJyLAogICAgZXE6IHNwbGluZQogIH07CiAgcmV0dXJuIHsKICAgIHg6IHhBcnIsCiAgICB5OiB5QXJyLAogICAgZXE6IHNwbGluZQogIH07Cn07CgpleHBvcnQgZGVmYXVsdCBjcmVhdGVTcGxpbmU7"},{"version":3,"sources":["C:/Users/JThorneUMN/Documents/GitHub/dendro-plots/src/modules/spline.js"],"names":["simpleSmoothingSpline","store","createSpline","x","y","freq","id","propA","propB","console","log","data","map","e","i","pair","lambda","Math","pow","spline","xArr","yArr","points","obj","push","splineObj","splineExists","cache","splines","find","o","Object","prop","eq"],"mappings":";;;AAAA,OAAOA,qBAAP,MAAkC,yBAAlC;AACA,OAAOC,KAAP,MAAkB,YAAlB;;AAEA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAASC,CAAT,EAAYC,CAAZ,EAAeC,IAAf,EAAqBC,EAArB,EAAyBC,KAAzB,EAAgCC,KAAhC,EAAuC;AAC1DC,EAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AAEA,MAAIC,IAAI,GAAGR,CAAC,CAACS,GAAF,CAAM,UAACC,CAAD,EAAIC,CAAJ,EAAU;AACzB,QAAIC,IAAI,GAAG;AACTZ,MAAAA,CAAC,EAAEU,CADM;AAETT,MAAAA,CAAC,EAAEA,CAAC,CAACU,CAAD;AAFK,KAAX;AAIA,WAAOC,IAAP;AACD,GANU,CAAX;AAQA,MAAIC,MAAM,GAAG,UAAUC,IAAI,CAACC,GAAL,CAAS,CAAT,EAAY,SAASD,IAAI,CAACP,GAAL,CAASL,IAAT,CAAT,GAA0B,KAAtC,CAAvB;AACA,MAAMc,MAAM,GAAGnB,qBAAqB,CAACW,IAAD,EAAO;AAAE,cAAUK;AAAZ,GAAP,CAApC;AAEA,MAAII,IAAI,GAAG,EAAX;AACA,MAAIC,IAAI,GAAG,EAAX;;AAf0D,6CAgBxCF,MAAM,CAACG,MAhBiC;AAAA;;AAAA;AAgB1D,wDAAiC;AAAA,UAAtBC,GAAsB;AAC/BH,MAAAA,IAAI,CAACI,IAAL,CAAUD,GAAG,CAACpB,CAAd;AACAkB,MAAAA,IAAI,CAACG,IAAL,CAAUD,GAAG,CAACnB,CAAd;AACD,KAnByD,CAqB1D;;AArB0D;AAAA;AAAA;AAAA;AAAA;;AAsB1D,MAAIqB,SAAJ;AACA,MAAIC,YAAY,GAAGzB,KAAK,CAAC0B,KAAN,CAAYC,OAAZ,CAAoBrB,KAApB,EAA2BsB,IAA3B,CAAgC,UAAAC,CAAC;AAAA,WAAIA,CAAC,CAACxB,EAAF,IAAQA,EAAZ;AAAA,GAAjC,CAAnB;;AACA,MAAIoB,YAAJ,EAAkB;AAChBD,IAAAA,SAAS,GAAGC,YAAZ;AACD,GAFD,MAEO;AACLD,IAAAA,SAAS,GAAG,IAAIM,MAAJ,EAAZ;AACAN,IAAAA,SAAS,CAACnB,EAAV,GAAeA,EAAf,CAFK,CAGL;;AACA,QAAI0B,IAAI,GAAIxB,KAAD,GAAUA,KAAV,GAAkBD,KAA7B;AACAN,IAAAA,KAAK,CAAC0B,KAAN,CAAYC,OAAZ,CAAoBI,IAApB,EAA0BR,IAA1B,CAA+BC,SAA/B;AACD;;AACDA,EAAAA,SAAS,CAACpB,IAAD,CAAT,GAAkB;AAChBF,IAAAA,CAAC,EAAEiB,IADa;AAEhBhB,IAAAA,CAAC,EAAEiB,IAFa;AAGhBY,IAAAA,EAAE,EAAEd;AAHY,GAAlB;AAMA,SAAO;AAAEhB,IAAAA,CAAC,EAAEiB,IAAL;AAAWhB,IAAAA,CAAC,EAAEiB,IAAd;AAAoBY,IAAAA,EAAE,EAAEd;AAAxB,GAAP;AACD,CAxCD;;AA0CA,eAAejB,YAAf","sourcesContent":["import simpleSmoothingSpline from 'simple-smoothing-spline'\r\nimport store from './store.js'\r\n\r\nconst createSpline = function(x, y, freq, id, propA, propB) {\r\n  console.log('created spline')\r\n\r\n  let data = x.map((e, i) => {\r\n    let pair = {\r\n      x: e,\r\n      y: y[i]\r\n    }\r\n    return pair\r\n  })\r\n\r\n  let lambda = 0.00001 * Math.pow(2, 9.9784 * Math.log(freq) + 3.975)\r\n  const spline = simpleSmoothingSpline(data, { 'lambda': lambda })\r\n\r\n  let xArr = []\r\n  let yArr = []\r\n  for (const obj of spline.points) {\r\n    xArr.push(obj.x)\r\n    yArr.push(obj.y)\r\n  }\r\n\r\n  // save spline to spline cache in store.js\r\n  let splineObj\r\n  let splineExists = store.cache.splines[propA].find(o => o.id == id)\r\n  if (splineExists) {\r\n    splineObj = splineExists\r\n  } else {\r\n    splineObj = new Object()\r\n    splineObj.id = id\r\n    // if calculating spline for index, save spline in in raw attribute not index attribute\r\n    let prop = (propB) ? propB : propA\r\n    store.cache.splines[prop].push(splineObj)\r\n  }\r\n  splineObj[freq] = {\r\n    x: xArr,\r\n    y: yArr,\r\n    eq: spline,\r\n  }\r\n\r\n  return { x: xArr, y: yArr, eq: spline }\r\n}\r\n\r\nexport default createSpline\r\n"]}]}