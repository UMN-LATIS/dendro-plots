{"remainingRequest":"C:\\Users\\JThorneUMN\\Documents\\GitHub\\dendro-plots\\plotting-app\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\JThorneUMN\\Documents\\GitHub\\dendro-plots\\plotting-app\\src\\modules\\traces.js","dependencies":[{"path":"C:\\Users\\JThorneUMN\\Documents\\GitHub\\dendro-plots\\plotting-app\\src\\modules\\traces.js","mtime":1630606289333},{"path":"C:\\Users\\JThorneUMN\\Documents\\GitHub\\dendro-plots\\plotting-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\JThorneUMN\\Documents\\GitHub\\dendro-plots\\plotting-app\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0IHN0b3JlIGZyb20gJy4vc3RvcmUuanMnOwppbXBvcnQgY3JlYXRlU3BsaW5lIGZyb20gJy4vc3BsaW5lLmpzJzsKaW1wb3J0IGNyZWF0ZUluZGV4IGZyb20gJy4vaW5kZXguanMnOwoKZnVuY3Rpb24gc2ltcGxlVHJhY2Uob2JqLCBjb2xvckJvb2wsIG1hcmtlckJvb2wsIHByb3BBLCBwcm9wQikgewogIHZhciB4ID0gcHJvcEIgPyBvYmpbcHJvcEFdW3Byb3BCXS54IDogb2JqW3Byb3BBXS54OwogIHZhciB5ID0gcHJvcEIgPyBvYmpbcHJvcEFdW3Byb3BCXS55IDogb2JqW3Byb3BBXS55OwogIHZhciBjb2xvciA9IGNvbG9yQm9vbCA/IG9iai5jb2xvciA6ICcjNzk3OTc5JzsKICB2YXIgbW9kZSA9IG1hcmtlckJvb2wgPyAnbGluZXMrbWFya2VycycgOiAnbGluZXMnOwogIHZhciB3aWR0aCA9IG1hcmtlckJvb2wgPyAxIDogMzsKICB2YXIgdHJhY2UgPSBuZXcgT2JqZWN0KCk7CiAgdHJhY2UubmFtZSA9IG9iai5uYW1lOwogIHRyYWNlLnggPSB4OwogIHRyYWNlLnkgPSB5OwogIHRyYWNlLmxpbmUgPSB7CiAgICBjb2xvcjogY29sb3IsCiAgICB3aWR0aDogd2lkdGgKICB9OwogIHRyYWNlLm1vZGUgPSBtb2RlOwogIHRyYWNlLnR5cGUgPSAnc2NhdHRlcic7IC8vIG5lZWQgc2NhdHRlciBnbAoKICByZXR1cm4gdHJhY2U7Cn0KCmZ1bmN0aW9uIHNwbGluZVRyYWNlKG9iaiwgcHJvcCwgZnJlcSwgc3BsaW5lRk9SaW5kZXgpIHsKICBpZiAoZnJlcSA8IDEpIHsKICAgIHZhciB5ZWFyU3BhbiA9IE1hdGguYWJzKG9iai5yYXcueFtvYmoucmF3LngubGVuZ3RoIC0gMV0gLSBvYmoucmF3LnhbMF0pOwogICAgZnJlcSA9IGZyZXEgKiB5ZWFyU3BhbjsKICB9CgogIHZhciB4LCB5OwoKICBpZiAoc3BsaW5lRk9SaW5kZXgpIHsKICAgIHZhciBpbmRleE9iaiA9IHN0b3JlLmNhY2hlLmluZGV4LmZpbmQoZnVuY3Rpb24gKG8pIHsKICAgICAgcmV0dXJuIG8uaWQgPT0gb2JqLmlkOwogICAgfSk7CiAgICB2YXIgaW5kZXggPSBpbmRleE9iaiA/IGluZGV4T2JqW2ZyZXFdIDogbnVsbDsKCiAgICBpZiAoIWluZGV4KSB7CiAgICAgIHZhciBzcGxpbmVPYmogPSBzdG9yZS5jYWNoZS5zcGxpbmVzLnJhdy5maW5kKGZ1bmN0aW9uIChvKSB7CiAgICAgICAgcmV0dXJuIG8uaWQgPT0gb2JqLmlkOwogICAgICB9KTsKICAgICAgdmFyIHNwbGluZSA9IHNwbGluZU9iaiAmJiBzcGxpbmVPYmpbZnJlcV0gPyBzcGxpbmVPYmpbZnJlcV0gOiBjcmVhdGVTcGxpbmUob2JqLnJhdy54LCBvYmoucmF3LnksIGZyZXEsIG9iai5pZCwgcHJvcCwgJ3JhdycpOwogICAgICBpbmRleCA9IGNyZWF0ZUluZGV4KG9iai5yYXcueCwgb2JqLnJhdy55LCBzcGxpbmUsIGZyZXEsIG9iai5pZCk7CiAgICB9CgogICAgeCA9IGluZGV4Lng7CiAgICB5ID0gaW5kZXgueTsKICB9IGVsc2UgewogICAgeCA9IG9iai5yYXcueDsKICAgIHkgPSBvYmoucmF3Lnk7CiAgfSAvLyBzcGxpbmUgZGF0YSBwcmV2aW91c2x5IHNhdmVkCgoKICBpZiAoIW9iai5zcGxpbmVbcHJvcF0pIHsKICAgIHZhciBfc3BsaW5lID0gY3JlYXRlU3BsaW5lKHgsIHksIGZyZXEsIG9iai5pZCwgcHJvcCk7IC8vIGFkZCBzcGxpbmUgdG8gb2JqCgoKICAgIG9iai5zcGxpbmVbcHJvcF0gPSB7CiAgICAgIHg6IF9zcGxpbmUueCwKICAgICAgeTogX3NwbGluZS55CiAgICB9OwogIH0KCiAgb2JqID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvYmopKTsKICBvYmoubmFtZSA9IG9iai5uYW1lICsgJ18nICsgZnJlcSArICd5cl9zcGxpbmUnOwogIHZhciB0cmFjZSA9IHNpbXBsZVRyYWNlKG9iaiwgIW9iai5jb2xvclN0YXRlLCBmYWxzZSwgJ3NwbGluZScsIHByb3ApOwogIHJldHVybiB0cmFjZTsKfQoKZnVuY3Rpb24gaW5kZXhUcmFjZShvYmosIHByb3AsIGZyZXEpIHsKICBpZiAoIW9iai5pbmRleCkgewogICAgLy8gY2hlY2sgaWYgc3BsaW5lIGV4aXN0cyBpbiBvcmRlciB0byBjb21wdXRlIGluZGV4CiAgICB2YXIgc3BsaW5lT2JqID0gc3RvcmUuY2FjaGUuc3BsaW5lcy5yYXcuZmluZChmdW5jdGlvbiAobykgewogICAgICByZXR1cm4gby5pZCA9PSBvYmouaWQ7CiAgICB9KTsKICAgIHZhciBzcGxpbmUgPSBzcGxpbmVPYmogJiYgc3BsaW5lT2JqW2ZyZXFdID8gc3BsaW5lT2JqW2ZyZXFdIDogY3JlYXRlU3BsaW5lKG9iai5yYXcueCwgb2JqLnJhdy55LCBmcmVxLCBvYmouaWQsIHByb3AsICdyYXcnKTsKICAgIHZhciBpbmRleCA9IGNyZWF0ZUluZGV4KG9iai5yYXcueCwgb2JqLnJhdy55LCBzcGxpbmUsIGZyZXEsIG9iai5pZCk7IC8vIGFkZCBpbmRleCB0byBvYmoKCiAgICBvYmouaW5kZXggPSB7CiAgICAgIHg6IGluZGV4LngsCiAgICAgIHk6IGluZGV4LnkKICAgIH07CiAgfQoKICBvYmogPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iaikpOwogIG9iai5uYW1lID0gb2JqLm5hbWUgKyAnXycgKyBmcmVxICsgJ3lyX2luZGV4JzsKICB2YXIgdHJhY2UgPSBzaW1wbGVUcmFjZShvYmosIG9iai5jb2xvclN0YXRlLCB0cnVlLCBwcm9wKTsKICByZXR1cm4gdHJhY2U7Cn0gLy8gcGFyYW0gKGxvY1ZhbCk6IHBsb3QgbG9jYXRpb24gdmFsdWUKCgp2YXIgZm9ybWF0VHJhY2VzID0gZnVuY3Rpb24gZm9ybWF0VHJhY2VzKGxvY1ZhbCkgewogIHZhciBhcnIgPSBuZXcgQXJyYXkoKTsgLy8gY3JlYXRlIGFycmF5IHdpdGggZGF0YSBvbmx5IGludGVuZGVkIGZvciBzcGVjaWZpZWQgcGxvdAoKICB2YXIgc3RvcmVDb3B5ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzdG9yZS5zdGF0ZXMuY3VycmVudCkpOyAvLyBmaWx0ZXIgb3V0IGluYWN0aXZlIGRhdGEgc2V0cwoKICB2YXIgYWN0aXZlU3RhdGVzID0gc3RvcmVDb3B5LmZpbHRlcihmdW5jdGlvbiAobykgewogICAgcmV0dXJuIG8ucmF3UG9pbnRzQWN0aXZlIHx8IG8ucmF3U3BsaW5lRnJlcSB8fCBvLmluZGV4UG9pbnRzRnJlcSB8fCBvLmluZGV4U3BsaW5lRnJlcTsKICB9KTsKICB2YXIgYWN0aXZlUGxvdHMgPSBhY3RpdmVTdGF0ZXMubWFwKGZ1bmN0aW9uIChvKSB7CiAgICB2YXIgc3RhdGUgPSBuZXcgT2JqZWN0KCk7CiAgICBzdGF0ZS5pZCA9IG8uaWQ7CiAgICBzdGF0ZS5uYW1lID0gby5uYW1lOwogICAgc3RhdGUuZmlsZSA9IG8uZmlsZTsKICAgIHN0YXRlLmNvbG9yID0gby5jb2xvcjsKICAgIHN0YXRlLmNvbG9yU3RhdGUgPSBvLmNvbG9yU3RhdGU7CgogICAgaWYgKG8ucmF3UGxvdExvY2F0aW9uID09IGxvY1ZhbCkgewogICAgICBzdGF0ZS5yYXdQb2ludHNBY3RpdmUgPSBvLnJhd1BvaW50c0FjdGl2ZTsKICAgICAgc3RhdGUucmF3U3BsaW5lRnJlcSA9IG8ucmF3U3BsaW5lRnJlcTsKICAgIH0KCiAgICBpZiAoby5pbmRleFBsb3RMb2NhdGlvbiA9PSBsb2NWYWwpIHsKICAgICAgc3RhdGUuaW5kZXhQb2ludHNGcmVxID0gby5pbmRleFBvaW50c0ZyZXE7CiAgICAgIHN0YXRlLmluZGV4U3BsaW5lRnJlcSA9IG8uaW5kZXhTcGxpbmVGcmVxOwogICAgfQoKICAgIHJldHVybiBzdGF0ZTsKICB9KTsgLy8gYWRkIHJlcXVpcmVkIHJhdyBkYXRhLCBzcGxpbmVzLCAmIGluZGV4IHRvIHN0YXRlcwoKICB2YXIgYWN0aXZlRGF0YSA9IGFjdGl2ZVBsb3RzLm1hcChmdW5jdGlvbiAob2JqKSB7CiAgICAvLyBhZGQgcmF3IGRhdGEgdG8gYWxsIGluLWNhc2Ugc3BsaW5lIG9yIGluZGV4IHJlcXVpcmVzIGNvbXB1dGF0aW9uCiAgICB2YXIgcmF3ID0gc3RvcmUuY2FjaGUucmF3LmZpbmQoZnVuY3Rpb24gKG8pIHsKICAgICAgcmV0dXJuIG8uaWQgPT0gb2JqLmlkOwogICAgfSk7CiAgICBvYmoucmF3ID0gewogICAgICB4OiByYXcueCwKICAgICAgeTogcmF3LnkKICAgIH07CgogICAgaWYgKG9iai5yYXdTcGxpbmVGcmVxKSB7CiAgICAgIHZhciByYXdTcGxpbmUgPSBzdG9yZS5jYWNoZS5zcGxpbmVzLnJhdy5maW5kKGZ1bmN0aW9uIChvKSB7CiAgICAgICAgcmV0dXJuIG8uaWQgPT0gb2JqLmlkOwogICAgICB9KTsKICAgICAgb2JqLnNwbGluZSA9IHsKICAgICAgICByYXc6IHJhd1NwbGluZSA/IHJhd1NwbGluZVtvYmoucmF3U3BsaW5lRnJlcV0gOiBudWxsCiAgICAgIH07CiAgICB9CgogICAgaWYgKG9iai5pbmRleFBvaW50c0ZyZXEpIHsKICAgICAgdmFyIGluZGV4ID0gc3RvcmUuY2FjaGUuaW5kZXguZmluZChmdW5jdGlvbiAobykgewogICAgICAgIHJldHVybiBvLmlkID09IG9iai5pZDsKICAgICAgfSk7CiAgICAgIG9iai5pbmRleCA9IGluZGV4ID8gaW5kZXhbb2JqLmluZGV4UG9pbnRzRnJlcV0gOiBudWxsOwogICAgfQoKICAgIGlmIChvYmouaW5kZXhTcGxpbmVGcmVxKSB7CiAgICAgIHZhciBpbmRleFNwbGluZSA9IHN0b3JlLmNhY2hlLnNwbGluZXMuaW5kZXguZmluZChmdW5jdGlvbiAobykgewogICAgICAgIHJldHVybiBvLmlkID09IG9iai5pZDsKICAgICAgfSk7CiAgICAgIG9iai5zcGxpbmUgPSB7CiAgICAgICAgaW5kZXg6IGluZGV4U3BsaW5lID8gaW5kZXhTcGxpbmVbb2JqLmluZGV4U3BsaW5lRnJlcV0gOiBudWxsCiAgICAgIH07CiAgICB9CgogICAgcmV0dXJuIG9iajsKICB9KTsgLy8gY3JlYXRlIHRyYWNlcyBiYXNlZCBvbiBuZWVkZWQgZm9ybWF0CiAgLy8gb3JkZXIgb2YgY3JlYXRpb24gaW1wb3J0YW50CiAgLy8gbW9zdCByZWNlbnQgdHJhY2UgcmVuZGVyZWQgb24gdG9wIG9mIGVhcmxpZXIgdHJhY2VzCgogIGFjdGl2ZURhdGEuZm9yRWFjaChmdW5jdGlvbiAob2JqKSB7CiAgICBpZiAob2JqLnJhd1NwbGluZUZyZXEpIHsKICAgICAgYXJyLnB1c2goc3BsaW5lVHJhY2Uob2JqLCAncmF3Jywgb2JqLnJhd1NwbGluZUZyZXEpKTsKICAgIH0KCiAgICBpZiAob2JqLnJhd1BvaW50c0FjdGl2ZSkgewogICAgICBhcnIucHVzaChzaW1wbGVUcmFjZShvYmosIG9iai5jb2xvclN0YXRlLCB0cnVlLCAncmF3JykpOwogICAgfQoKICAgIGlmIChvYmouaW5kZXhTcGxpbmVGcmVxKSB7CiAgICAgIGFyci5wdXNoKHNwbGluZVRyYWNlKG9iaiwgJ2luZGV4Jywgb2JqLmluZGV4U3BsaW5lRnJlcSwgdHJ1ZSkpOwogICAgfQoKICAgIGlmIChvYmouaW5kZXhQb2ludHNGcmVxKSB7CiAgICAgIGFyci5wdXNoKGluZGV4VHJhY2Uob2JqLCAnaW5kZXgnLCBvYmouaW5kZXhQb2ludHNGcmVxKSk7CiAgICB9CiAgfSk7CiAgcmV0dXJuIGFycjsKfTsKCmV4cG9ydCBkZWZhdWx0IGZvcm1hdFRyYWNlczs="},{"version":3,"sources":["C:/Users/JThorneUMN/Documents/GitHub/dendro-plots/plotting-app/src/modules/traces.js"],"names":["store","createSpline","createIndex","simpleTrace","obj","colorBool","markerBool","propA","propB","x","y","color","mode","width","trace","Object","name","line","type","splineTrace","prop","freq","splineFORindex","yearSpan","Math","abs","raw","length","indexObj","cache","index","find","o","id","splineObj","splines","spline","JSON","parse","stringify","colorState","indexTrace","formatTraces","locVal","arr","Array","storeCopy","states","current","activeStates","filter","rawPointsActive","rawSplineFreq","indexPointsFreq","indexSplineFreq","activePlots","map","state","file","rawPlotLocation","indexPlotLocation","activeData","rawSpline","indexSpline","forEach","push"],"mappings":"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","sourcesContent":["import store from './store.js'\r\nimport createSpline from './spline.js'\r\nimport createIndex from './index.js'\r\n\r\nfunction simpleTrace(obj, colorBool, markerBool, propA, propB) {\r\n  let x = (propB) ? obj[propA][propB].x : obj[propA].x\r\n  let y = (propB) ? obj[propA][propB].y : obj[propA].y\r\n  let color = (colorBool) ? obj.color : '#797979'\r\n  let mode = (markerBool) ? 'lines+markers' : 'lines'\r\n  let width = (markerBool) ? 1 : 3\r\n\r\n  let trace = new Object()\r\n  trace.name = obj.name\r\n  trace.x = x\r\n  trace.y = y\r\n  trace.line = { color: color, width: width }\r\n  trace.mode = mode\r\n  trace.type = 'scatter' // need scatter gl\r\n\r\n  return trace\r\n}\r\n\r\nfunction splineTrace(obj, prop, freq, splineFORindex) {\r\n  if (freq < 1) {\r\n    let yearSpan = Math.abs(obj.raw.x[obj.raw.x.length - 1] - obj.raw.x[0])\r\n    freq = freq * yearSpan\r\n  }\r\n\r\n  let x, y\r\n  if (splineFORindex) {\r\n    let indexObj = store.cache.index.find(o => o.id == obj.id)\r\n    let index = (indexObj) ? indexObj[freq] : null\r\n    if (!index) {\r\n      let splineObj = store.cache.splines.raw.find(o => o.id == obj.id)\r\n      let spline = (splineObj && splineObj[freq]) ? splineObj[freq] : createSpline(obj.raw.x, obj.raw.y, freq, obj.id, prop, 'raw')\r\n      index = createIndex(obj.raw.x, obj.raw.y, spline, freq, obj.id)\r\n    }\r\n    x = index.x\r\n    y = index.y\r\n  } else {\r\n    x = obj.raw.x\r\n    y = obj.raw.y\r\n  }\r\n\r\n  // spline data previously saved\r\n  if (!obj.spline[prop]) {\r\n    let spline = createSpline(x, y, freq, obj.id, prop)\r\n\r\n    // add spline to obj\r\n    obj.spline[prop] = {\r\n      x: spline.x,\r\n      y: spline.y\r\n    }\r\n  }\r\n\r\n  obj = JSON.parse(JSON.stringify(obj))\r\n  obj.name = obj.name + '_' + freq +'yr_spline'\r\n\r\n  let trace = simpleTrace(obj, !obj.colorState, false, 'spline', prop)\r\n\r\n  return trace\r\n}\r\n\r\nfunction indexTrace(obj, prop, freq) {\r\n  if (!obj.index) {\r\n    // check if spline exists in order to compute index\r\n    let splineObj = store.cache.splines.raw.find(o => o.id == obj.id)\r\n    let spline = (splineObj && splineObj[freq]) ? splineObj[freq] : createSpline(obj.raw.x, obj.raw.y, freq, obj.id, prop, 'raw')\r\n    let index = createIndex(obj.raw.x, obj.raw.y, spline, freq, obj.id)\r\n\r\n    // add index to obj\r\n    obj.index = {\r\n      x: index.x,\r\n      y: index.y\r\n    }\r\n  }\r\n\r\n  obj = JSON.parse(JSON.stringify(obj))\r\n  obj.name = obj.name + '_' + freq +'yr_index'\r\n\r\n  let trace = simpleTrace(obj, obj.colorState, true, prop)\r\n\r\n  return trace\r\n}\r\n\r\n// param (locVal): plot location value\r\nconst formatTraces = function(locVal) {\r\n  let arr = new Array()\r\n\r\n  // create array with data only intended for specified plot\r\n  let storeCopy = JSON.parse(JSON.stringify(store.states.current))\r\n\r\n  // filter out inactive data sets\r\n  let activeStates = storeCopy.filter(o => (o.rawPointsActive || o.rawSplineFreq || o.indexPointsFreq || o.indexSplineFreq))\r\n\r\n  let activePlots = activeStates.map(o => {\r\n    let state = new Object()\r\n    state.id = o.id\r\n    state.name = o.name\r\n    state.file = o.file\r\n    state.color = o.color\r\n    state.colorState = o.colorState\r\n\r\n    if (o.rawPlotLocation == locVal) {\r\n      state.rawPointsActive = o.rawPointsActive\r\n      state.rawSplineFreq = o.rawSplineFreq\r\n    }\r\n    if (o.indexPlotLocation == locVal) {\r\n      state.indexPointsFreq = o.indexPointsFreq\r\n      state.indexSplineFreq = o.indexSplineFreq\r\n    }\r\n\r\n    return state\r\n  })\r\n\r\n  // add required raw data, splines, & index to states\r\n  let activeData = activePlots.map(obj => {\r\n    // add raw data to all in-case spline or index requires computation\r\n    let raw = store.cache.raw.find(o => o.id == obj.id)\r\n    obj.raw = {\r\n      x: raw.x,\r\n      y: raw.y\r\n    }\r\n    if (obj.rawSplineFreq) {\r\n      let rawSpline = store.cache.splines.raw.find(o => o.id == obj.id)\r\n      obj.spline = {\r\n        raw: (rawSpline) ? rawSpline[obj.rawSplineFreq] : null\r\n      }\r\n    }\r\n    if (obj.indexPointsFreq) {\r\n      let index = store.cache.index.find(o => o.id == obj.id)\r\n      obj.index = (index) ? index[obj.indexPointsFreq] : null\r\n    }\r\n    if (obj.indexSplineFreq) {\r\n      let indexSpline = store.cache.splines.index.find(o => o.id == obj.id)\r\n      obj.spline = {\r\n        index: (indexSpline) ? indexSpline[obj.indexSplineFreq] : null\r\n      }\r\n    }\r\n\r\n    return obj\r\n  })\r\n\r\n  // create traces based on needed format\r\n  // order of creation important\r\n  // most recent trace rendered on top of earlier traces\r\n  activeData.forEach(obj => {\r\n    if (obj.rawSplineFreq) {\r\n      arr.push(splineTrace(obj, 'raw', obj.rawSplineFreq))\r\n    }\r\n    if (obj.rawPointsActive) {\r\n      arr.push(simpleTrace(obj, obj.colorState, true, 'raw'))\r\n    }\r\n    if (obj.indexSplineFreq) {\r\n      arr.push(splineTrace(obj, 'index', obj.indexSplineFreq, true))\r\n    }\r\n    if (obj.indexPointsFreq) {\r\n      arr.push(indexTrace(obj, 'index', obj.indexPointsFreq))\r\n    }\r\n  })\r\n\r\n  return arr\r\n}\r\n\r\nexport default formatTraces\r\n"]}]}