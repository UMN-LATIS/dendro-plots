{"remainingRequest":"C:\\Users\\JThorneUMN\\Documents\\GitHub\\dendro-plots\\plotting-app\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\JThorneUMN\\Documents\\GitHub\\dendro-plots\\plotting-app\\src\\modules\\spline.js","dependencies":[{"path":"C:\\Users\\JThorneUMN\\Documents\\GitHub\\dendro-plots\\plotting-app\\src\\modules\\spline.js","mtime":1630511649540},{"path":"C:\\Users\\JThorneUMN\\Documents\\GitHub\\dendro-plots\\plotting-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\JThorneUMN\\Documents\\GitHub\\dendro-plots\\plotting-app\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIkM6L1VzZXJzL0pUaG9ybmVVTU4vRG9jdW1lbnRzL0dpdEh1Yi9kZW5kcm8tcGxvdHMvcGxvdHRpbmctYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCBzaW1wbGVTbW9vdGhpbmdTcGxpbmUgZnJvbSAnc2ltcGxlLXNtb290aGluZy1zcGxpbmUnOwppbXBvcnQgc3RvcmUgZnJvbSAnLi9zdG9yZS5qcyc7Cgp2YXIgY3JlYXRlU3BsaW5lID0gZnVuY3Rpb24gY3JlYXRlU3BsaW5lKHgsIHksIGZyZXEsIGlkLCBwcm9wQSwgcHJvcEIpIHsKICBjb25zb2xlLmxvZygnY3JlYXRlZCBzcGxpbmUnKTsKICB2YXIgZGF0YSA9IHgubWFwKGZ1bmN0aW9uIChlLCBpKSB7CiAgICB2YXIgcGFpciA9IHsKICAgICAgeDogZSwKICAgICAgeTogeVtpXQogICAgfTsKICAgIHJldHVybiBwYWlyOwogIH0pOwogIHZhciBsYW1iZGEgPSAwLjAwMDAxICogTWF0aC5wb3coMiwgOS45Nzg0ICogTWF0aC5sb2coZnJlcSkgKyAzLjk3NSk7CiAgdmFyIHNwbGluZSA9IHNpbXBsZVNtb290aGluZ1NwbGluZShkYXRhLCB7CiAgICAnbGFtYmRhJzogbGFtYmRhCiAgfSk7CiAgdmFyIHhBcnIgPSBbXTsKICB2YXIgeUFyciA9IFtdOwoKICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoc3BsaW5lLnBvaW50cyksCiAgICAgIF9zdGVwOwoKICB0cnkgewogICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgdmFyIG9iaiA9IF9zdGVwLnZhbHVlOwogICAgICB4QXJyLnB1c2gob2JqLngpOwogICAgICB5QXJyLnB1c2gob2JqLnkpOwogICAgfSAvLyBzYXZlIHNwbGluZSB0byBzcGxpbmUgY2FjaGUgaW4gc3RvcmUuanMKCiAgfSBjYXRjaCAoZXJyKSB7CiAgICBfaXRlcmF0b3IuZShlcnIpOwogIH0gZmluYWxseSB7CiAgICBfaXRlcmF0b3IuZigpOwogIH0KCiAgdmFyIHNwbGluZU9iajsKICB2YXIgc3BsaW5lRXhpc3RzID0gc3RvcmUuY2FjaGUuc3BsaW5lc1twcm9wQV0uZmluZChmdW5jdGlvbiAobykgewogICAgcmV0dXJuIG8uaWQgPT0gaWQ7CiAgfSk7CgogIGlmIChzcGxpbmVFeGlzdHMpIHsKICAgIHNwbGluZU9iaiA9IHNwbGluZUV4aXN0czsKICB9IGVsc2UgewogICAgc3BsaW5lT2JqID0gbmV3IE9iamVjdCgpOwogICAgc3BsaW5lT2JqLmlkID0gaWQ7IC8vIGlmIGNhbGN1bGF0aW5nIHNwbGluZSBmb3IgaW5kZXgsIHNhdmUgc3BsaW5lIGluIGluIHJhdyBhdHRyaWJ1dGUgbm90IGluZGV4IGF0dHJpYnV0ZQoKICAgIHZhciBwcm9wID0gcHJvcEIgPyBwcm9wQiA6IHByb3BBOwogICAgc3RvcmUuY2FjaGUuc3BsaW5lc1twcm9wXS5wdXNoKHNwbGluZU9iaik7CiAgfQoKICBzcGxpbmVPYmpbZnJlcV0gPSB7CiAgICB4OiB4QXJyLAogICAgeTogeUFycgogIH07CiAgcmV0dXJuIHsKICAgIHg6IHhBcnIsCiAgICB5OiB5QXJyCiAgfTsKfTsKCmV4cG9ydCBkZWZhdWx0IGNyZWF0ZVNwbGluZTs="},{"version":3,"sources":["C:/Users/JThorneUMN/Documents/GitHub/dendro-plots/plotting-app/src/modules/spline.js"],"names":["simpleSmoothingSpline","store","createSpline","x","y","freq","id","propA","propB","console","log","data","map","e","i","pair","lambda","Math","pow","spline","xArr","yArr","points","obj","push","splineObj","splineExists","cache","splines","find","o","Object","prop"],"mappings":";;;AAAA,OAAOA,qBAAP,MAAkC,yBAAlC;AACA,OAAOC,KAAP,MAAkB,YAAlB;;AAEA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAASC,CAAT,EAAYC,CAAZ,EAAeC,IAAf,EAAqBC,EAArB,EAAyBC,KAAzB,EAAgCC,KAAhC,EAAuC;AAC1DC,EAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AAEA,MAAIC,IAAI,GAAGR,CAAC,CAACS,GAAF,CAAM,UAACC,CAAD,EAAIC,CAAJ,EAAU;AACzB,QAAIC,IAAI,GAAG;AACTZ,MAAAA,CAAC,EAAEU,CADM;AAETT,MAAAA,CAAC,EAAEA,CAAC,CAACU,CAAD;AAFK,KAAX;AAIA,WAAOC,IAAP;AACD,GANU,CAAX;AAQA,MAAIC,MAAM,GAAG,UAAUC,IAAI,CAACC,GAAL,CAAS,CAAT,EAAY,SAASD,IAAI,CAACP,GAAL,CAASL,IAAT,CAAT,GAA0B,KAAtC,CAAvB;AACA,MAAMc,MAAM,GAAGnB,qBAAqB,CAACW,IAAD,EAAO;AAAE,cAAUK;AAAZ,GAAP,CAApC;AAEA,MAAII,IAAI,GAAG,EAAX;AACA,MAAIC,IAAI,GAAG,EAAX;;AAf0D,6CAgBxCF,MAAM,CAACG,MAhBiC;AAAA;;AAAA;AAgB1D,wDAAiC;AAAA,UAAtBC,GAAsB;AAC/BH,MAAAA,IAAI,CAACI,IAAL,CAAUD,GAAG,CAACpB,CAAd;AACAkB,MAAAA,IAAI,CAACG,IAAL,CAAUD,GAAG,CAACnB,CAAd;AACD,KAnByD,CAqB1D;;AArB0D;AAAA;AAAA;AAAA;AAAA;;AAsB1D,MAAIqB,SAAJ;AACA,MAAIC,YAAY,GAAGzB,KAAK,CAAC0B,KAAN,CAAYC,OAAZ,CAAoBrB,KAApB,EAA2BsB,IAA3B,CAAgC,UAAAC,CAAC;AAAA,WAAIA,CAAC,CAACxB,EAAF,IAAQA,EAAZ;AAAA,GAAjC,CAAnB;;AACA,MAAIoB,YAAJ,EAAkB;AAChBD,IAAAA,SAAS,GAAGC,YAAZ;AACD,GAFD,MAEO;AACLD,IAAAA,SAAS,GAAG,IAAIM,MAAJ,EAAZ;AACAN,IAAAA,SAAS,CAACnB,EAAV,GAAeA,EAAf,CAFK,CAGL;;AACA,QAAI0B,IAAI,GAAIxB,KAAD,GAAUA,KAAV,GAAkBD,KAA7B;AACAN,IAAAA,KAAK,CAAC0B,KAAN,CAAYC,OAAZ,CAAoBI,IAApB,EAA0BR,IAA1B,CAA+BC,SAA/B;AACD;;AACDA,EAAAA,SAAS,CAACpB,IAAD,CAAT,GAAkB;AAChBF,IAAAA,CAAC,EAAEiB,IADa;AAEhBhB,IAAAA,CAAC,EAAEiB;AAFa,GAAlB;AAKA,SAAO;AAAElB,IAAAA,CAAC,EAAEiB,IAAL;AAAWhB,IAAAA,CAAC,EAAEiB;AAAd,GAAP;AACD,CAvCD;;AAyCA,eAAenB,YAAf","sourcesContent":["import simpleSmoothingSpline from 'simple-smoothing-spline'\r\nimport store from './store.js'\r\n\r\nconst createSpline = function(x, y, freq, id, propA, propB) {\r\n  console.log('created spline')\r\n\r\n  let data = x.map((e, i) => {\r\n    let pair = {\r\n      x: e,\r\n      y: y[i]\r\n    }\r\n    return pair\r\n  })\r\n\r\n  let lambda = 0.00001 * Math.pow(2, 9.9784 * Math.log(freq) + 3.975)\r\n  const spline = simpleSmoothingSpline(data, { 'lambda': lambda })\r\n\r\n  let xArr = []\r\n  let yArr = []\r\n  for (const obj of spline.points) {\r\n    xArr.push(obj.x)\r\n    yArr.push(obj.y)\r\n  }\r\n\r\n  // save spline to spline cache in store.js\r\n  let splineObj\r\n  let splineExists = store.cache.splines[propA].find(o => o.id == id)\r\n  if (splineExists) {\r\n    splineObj = splineExists\r\n  } else {\r\n    splineObj = new Object()\r\n    splineObj.id = id\r\n    // if calculating spline for index, save spline in in raw attribute not index attribute\r\n    let prop = (propB) ? propB : propA\r\n    store.cache.splines[prop].push(splineObj)\r\n  }\r\n  splineObj[freq] = {\r\n    x: xArr,\r\n    y: yArr,\r\n  }\r\n\r\n  return { x: xArr, y: yArr }\r\n}\r\n\r\nexport default createSpline\r\n"]}]}